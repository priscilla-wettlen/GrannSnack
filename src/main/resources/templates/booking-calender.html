<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Tvättbokning</title>
 <style>
 
 body {
 font-family: 'Arial', sans-serif;
 margin: 0;
 padding: 0;
 background-color: #f6f6fb;
 color: #333;
 }

 .container {
 max-width: 1200px;
 margin: 0 auto;
 padding: 20px;
 }

 header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 20px;
 padding: 10px 20px;
 background-color: #f6f6fb;
 border-bottom: 1px solid #e0e0e0;
 }

 .header-title {
 font-size: 24px;
 font-weight: bold;
 color: #000;
 }

 .header-nav {
 display: flex;
 gap: 20px;
 }

 .header-nav a {
 text-decoration: none;
 color: #000;
 }

 .header-nav a.logout {
 color: #ff3b30;
 }

 h1 {
 font-size: 32px;
 margin-top: 40px;
 margin-bottom: 30px;
 color: #000;
 }

 .booking-container {
 display: flex;
 gap: 20px;
 margin-top: 20px;
 }

 .date-section, .time-section {
 background-color: #fff;
 border-radius: 10px;
 padding: 20px;
 flex: 1;
 }

 .section-title {
 font-size: 18px;
 font-weight: bold;
 margin-bottom: 20px;
 }

 /* Calendar styles */
 .calendar {
 width: 100%;
 }

 .calendar-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 15px;
 }

 .calendar-nav {
 cursor: pointer;
 background: none;
 border: none;
 font-size: 18px;
 }

 .calendar-month {
 font-weight: bold;
 font-size: 16px;
 }

 .calendar-grid {
 display: grid;
 grid-template-columns: repeat(7, 1fr);
 gap: 5px;
 text-align: center;
 }

 .calendar-day-header {
 font-size: 12px;
 padding: 5px 0;
 color: #777;
 }

 .calendar-day {
 padding: 8px;
 border-radius: 50%;
 width: 36px;
 height: 36px;
 display: flex;
 align-items: center;
 justify-content: center;
 margin: 0 auto;
 cursor: pointer;
 }

 .calendar-day:hover {
 background-color: #f0f0f5;
 }

 .calendar-day.selected {
 background-color: #000;
 color: #fff;
 }

 /* Time slot styles */
 .time-slots {
 display: flex;
 flex-direction: column;
 gap: 15px;
 }

 .time-slot {
 border: 1px solid #e0e0e0;
 border-radius: 8px;
 padding: 15px;
 display: flex;
 justify-content: space-between;
 align-items: center;
 }

 .time-info {
 display: flex;
 flex-direction: column;
 }

 .time-label {
 font-weight: bold;
 margin-bottom: 5px;
 }

 .time-hours {
 color: #777;
 }

 .book-button {
 background-color: #000;
 color: #fff;
 border: none;
 border-radius: 5px;
 padding: 8px 16px;
 font-weight: bold;
 cursor: pointer;
 transition: background-color 0.3s;
 }

 .book-button:hover {
 background-color: #333;
 }

 .booking-form {
 background-color: white;
 padding: 20px;
 border-radius: 10px;
 box-shadow: 0 2px 5px rgba(0,0,0,0.1);
 margin-top: 20px;
 display: none;
 }

 .form-group {
 margin-bottom: 15px;
 }

 label {
 display: block;
 margin-bottom: 5px;
 font-weight: bold;
 }

 textarea {
 width: 100%;
 padding: 10px;
 border: 1px solid #e0e0e0;
 border-radius: 5px;
 }

 .form-buttons {
 display: flex;
 gap: 10px;
 margin-top: 20px;
 }

 /* Confirmation message styles */
 .confirmation-message {
 display: none;
 position: fixed;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 background-color: rgba(0, 0, 0, 0.8);
 color: white;
 padding: 20px 30px;
 border-radius: 8px;
 text-align: center;
 z-index: 1000;
 animation: fadeIn 0.3s, fadeOut 0.3s 2.7s;
 max-width: 80%;
 }

 @keyframes fadeIn {
 from { opacity: 0; }
 to { opacity: 1; }
 }

 @keyframes fadeOut {
 from { opacity: 1; }
 to { opacity: 0; }
 }

 .overlay {
 display: none;
 position: fixed;
 top: 0;
 left: 0;
 width: 100%;
 height: 100%;
 background-color: rgba(0, 0, 0, 0.5);
 z-index: 999;
 }
 </style>
</head>
<body>
    <header>
        <a th:href="@{/default}" class="logo-link"><div class="logo">GrannSnack</div></a>
        <nav class="nav">
          <a href="#" class="nav-link">Profil</a>
          <a th:href="@{/logout}" class="nav-link logout">Logga ut</a>
        </nav>
    </header>

<div class="container">
 <h1>Tvättbokning</h1>

 <div class="booking-container">
 <div class="date-section">
 <div class="section-title">Välj datum</div>

 <div class="calendar">
 <div class="calendar-header">
 <button class="calendar-nav" onclick="navigateMonth(-1)">‹</button>
 <div class="calendar-month" th:text="${month + ' ' + year}">April 2025</div>
 <button class="calendar-nav" onclick="navigateMonth(1)">›</button>
 </div>

 <div class="calendar-grid">
 <!-- Day headers -->
 <div class="calendar-day-header">SÖN</div>
 <div class="calendar-day-header">MÅN</div>
 <div class="calendar-day-header">TIS</div>
 <div class="calendar-day-header">ONS</div>
 <div class="calendar-day-header">TOR</div>
 <div class="calendar-day-header">FRE</div>
 <div class="calendar-day-header">LÖR</div>

 <!-- Calendar days - will be populated by JavaScript -->
 <div th:each="day : ${#numbers.sequence(1, 42)}"
 class="calendar-day"
 th:classappend="${day == 19} ? 'selected' : ''"
 th:text="${day <= 31 ? day : ''}"
 th:attr="data-day=${day <= 31 ? day : ''}"
 onclick="selectDate(this)">
 </div>
 </div>
 </div>
 </div>

 <div class="time-section">
 <div class="section-title">Tillgängliga tider</div>

 <div class="time-slots">
 <div class="time-slot">
 <div class="time-info">
 <div class="time-label">Morgon</div>
 <div class="time-hours">07:00 - 12:00</div>
 </div>
 <button class="book-button" onclick="bookTimeSlot('morning', '07:00 - 12:00')">Boka</button>
 </div>

 <div class="time-slot">
 <div class="time-info">
 <div class="time-label">Eftermiddag</div>
 <div class="time-hours">12:00 - 17:00</div>
 </div>
 <button class="book-button" onclick="bookTimeSlot('afternoon', '12:00 - 17:00')">Boka</button>
 </div>

 <div class="time-slot">
 <div class="time-info">
 <div class="time-label">Kväll</div>
 <div class="time-hours">17:00 - 22:00</div>
 </div>
 <button class="book-button" onclick="bookTimeSlot('evening', '17:00 - 22:00')">Boka</button>
 </div>
 </div>
 </div>
 </div>

 <div class="booking-form" id="bookingForm">
 <h2>Bekräfta bokning</h2>
 <form id="bookingFormElement" th:action="@{/u/laundry-booking/create}" method="post" onsubmit="return showConfirmation(event)">
 <input type="hidden" id="bookingDay" name="day" value="">
 <input type="hidden" id="bookingSlot" name="slot" value="">
 <input type="hidden" id="bookingTime" name="time" value="">

 <div class="form-group">
 <label for="bookingDetails">Vald tid:</label>
 <div id="bookingDetails"></div>
 </div>

 <div class="form-group">
 <label for="notes">Anteckningar (valfritt):</label>
 <textarea id="notes" name="notes" rows="3"></textarea>
 </div>

 <div class="form-buttons">
 <button type="submit" class="book-button">Bekräfta bokning</button>
 <button type="button" onclick="cancelBooking()" class="book-button" style="background-color: #ff3b30;">Avbryt</button>
 </div>
 </form>
 </div>

 <!-- Confirmation message overlay -->
 <div id="overlay" class="overlay"></div>
 <div id="confirmationMessage" class="confirmation-message"></div>
</div>

<script th:inline="javascript">
 // Get current month and year from Thymeleaf
 const currentMonth = /*[[${month}]]*/ 'April';
 const currentYear = /*[[${year}]]*/ 2025;
 let selectedDay = 19; // Default to the 19th as shown in the image
 let selectedTimeRange = '';

 // Function to populate calendar days
 function populateCalendar(month, year) {
 // In a real implementation, this would calculate the days correctly
 // For now, we'll just show a simple April calendar as in the image
 }

 // Call on page load
 populateCalendar(currentMonth, currentYear);

 function navigateMonth(offset) {
 // In a real application, this would navigate to a different month
 // For now, we'll just redirect with a dummy parameter
 window.location.href = `/u/laundry-booking?month=${offset > 0 ? 'May' : 'March'}&year=${currentYear}`;
 }

 function selectDate(element) {
 // Remove selected class from currently selected day
 const currentSelected = document.querySelector('.calendar-day.selected');
 if (currentSelected) {
 currentSelected.classList.remove('selected');
 }

 // Add selected class to clicked day
 element.classList.add('selected');
 selectedDay = element.getAttribute('data-day');
 }

 function bookTimeSlot(slot, timeRange) {
 const slotTypes = {
 'morning': 1,
 'afternoon': 2,
 'evening': 3
 };

 const monthNames = {
 'April': 4
 };

 // Set form values
 document.getElementById('bookingDay').value = selectedDay;
 document.getElementById('bookingSlot').value = slotTypes[slot];
 document.getElementById('bookingTime').value = timeRange;
 selectedTimeRange = timeRange;

 // Display booking details
 const selectedDate = `${selectedDay} ${currentMonth} ${currentYear}`;
 document.getElementById('bookingDetails').textContent = `${selectedDate}, ${timeRange}`;

 // Show booking form
 document.getElementById('bookingForm').style.display = 'block';

 // Scroll to booking form
 document.getElementById('bookingForm').scrollIntoView({
 behavior: 'smooth'
 });
 }

 function cancelBooking() {
 document.getElementById('bookingForm').style.display = 'none';
 }

 function showConfirmation(event) {
 // Prevent the default form submission
 event.preventDefault();

 // Get the booking details
 const selectedDate = `${selectedDay} ${currentMonth} ${currentYear}`;
 const bookingDetails = `${selectedDate}, ${selectedTimeRange}`;

 // Show confirmation message
 const confirmationElement = document.getElementById('confirmationMessage');
 confirmationElement.textContent = `Din bokning för ${bookingDetails} har bekräftats!`;
 confirmationElement.style.display = 'block';

 // Show overlay
 document.getElementById('overlay').style.display = 'block';

 // Hide the confirmation message after 3 seconds
 setTimeout(() => {
 confirmationElement.style.display = 'none';
 document.getElementById('overlay').style.display = 'none';

 // Close the booking form
 document.getElementById('bookingForm').style.display = 'none';

 // Submit the form after showing the message
 document.getElementById('bookingFormElement').submit();
 }, 3000);

 return false;
 }
</script>
</body>
</html>